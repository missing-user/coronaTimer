var b=new URLSearchParams(location.search);b.has("country")?(fetch(["https://corona.lmao.ninja/v2/historical/",b.get("country")].join("")).then(function(a){return a.json()}).then(c),document.getElementById("pagetitle").innerHTML+=["<br> in",b.get("country")].join(" ")):fetch("https://corona.lmao.ninja/v2/historical/all").then(function(a){return a.json()}).then(c);function d(a){k=Object.keys(a);return a[k[k.length-1]]-a[k[k.length-2]]}
function h(a){elem=document.getElementById(a);elem.textContent++;elem.textContent+=" ";elem.parentElement.classList.toggle("even");elem=document.getElementById(["l",a].join(""));elem.textContent++;elem.textContent+=" ";elem.parentElement.classList.toggle("even")}
function l(a){currentDate=Object.keys(a.a)[Object.keys(a.a).length-1];if(null!==window.localStorage.getItem("lastTime")){dateKey=window.localStorage.getItem("dateKey");oldTime=parseInt(window.localStorage.getItem("lastTime"));timeDiff=(Date.now()-oldTime)%864E5;var e=0,f=0,g=0;864E5<Date.now()-oldTime&&(e=a.a[currentDate]-a.a[dateKey],f=a.b[currentDate]-a.b[dateKey],g=a.c[currentDate]-a.c[dateKey]);e+=Math.floor(timeDiff/(864E5/d(a.a)));f+=Math.floor(timeDiff/(864E5/d(a.b)));g+=Math.floor(timeDiff/(864E5/d(a.c)));console.log("loaded last session data ",dateKey,oldTime);document.getElementById("linf").textContent=e+" ";document.getElementById("ldead").textContent=f+" ";document.getElementById("lreco").textContent=g+" "}a=currentDate;null===window.localStorage.getItem("lastTime")&&(window.localStorage.setItem("dateKey",a),window.localStorage.setItem("lastTime",Date.now()))}
function c(a){console.log(a);"country"in a&&(a=a.timeline);0<d(a.a)&&(window.document.title=0,setInterval(function(){window.document.title++},864E5/d(a.a)),setInterval(h,864E5/d(a.a),"inf"));0<d(a.b)&&setInterval(h,864E5/d(a.b),"dead");0<d(a.c)&&setInterval(h,864E5/d(a.c),"reco");window.localStorage&&l(a)};
